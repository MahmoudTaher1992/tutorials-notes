Contents at a Glance
Introduction ................................................................ 1
Part I: Getting Started with NoSQL ............................... 5
Chapter 1: Introducing NoSQL: The Big Picture ............................................................7
Chapter 2: NoSQL Database Design and Terminology ................................................27
Chapter 3: Evaluating NoSQL .........................................................................................59
Part II: Key-Value Stores ............................................ 95
Chapter 4: Common Features of Key-Value Stores ......................................................97
Chapter 5: Key-Value Stores in the Enterprise ...........................................................105
Chapter 6: Key-Value Use Cases ..................................................................................111
Chapter 7: Key-Value Store Products ..........................................................................117
Chapter 8: Riak and Basho ............................................................................................133
Part III: Bigtable Clones ........................................... 139
Chapter 9: Common Features of Bigtables .................................................................141
Chapter 10: Bigtable in the Enterprise ........................................................................153
Chapter 11: Bigtable Use Cases ....................................................................................165
Chapter 12: Bigtable Products .....................................................................................171
Chapter 13: Cassandra and DataStax ..........................................................................193
Part IV: Document Databases ................................... 199
Chapter 14: Common Features of Document Databases ..........................................201
Chapter 15: Document Databases in the Enterprise .................................................213
Chapter 16: Document Database Use Cases ...............................................................221
Chapter 17: Document Database Products ................................................................233
Chapter 18: MongoDB ...................................................................................................251
www.allitebooks.com
Part V: Graph and Triple Stores ................................. 257
Chapter 19: Common Features of Triple and Graph Stores .....................................259
Chapter 20: Triple Stores in the Enterprise ................................................................275
Chapter 21: Triple Store Use Cases .............................................................................283
Chapter 22: Triple Store Products ...............................................................................293
Chapter 23: Neo4j and Neo Technologies ...................................................................309
Part VI: Search Engines ............................................ 315
Chapter 24: Common Features of Search Engines .....................................................317
Chapter 25: Search Engines in the Enterprise ............................................................327
Chapter 26: Search Engine Use Cases .........................................................................335
Chapter 27: Types of Search Engines ..........................................................................341
Chapter 28: Elasticsearch .............................................................................................353
Part VII: Hybrid NoSQL Databases ............................ 359
Chapter 29: Common Hybrid NoSQL Features ...........................................................361
Chapter 30: Hybrid Databases in the Enterprise .......................................................369
Chapter 31: Hybrid NoSQL Database Use Cases ........................................................375
Chapter 32: Hybrid NoSQL Database Products .........................................................381
Chapter 33: MarkLogic ..................................................................................................389
Part VIII: The Part of Tens ........................................ 399
Chapter 34: Ten Advantages of NoSQL over RDBMS ................................................401
Chapter 35: Ten NoSQL Misconceptions ....................................................................407
Chapter 36: Ten Reasons Developers Love NoSQL ...................................................413
Index ...................................................................... 419
www.allitebooks.com
Table of Contents
Introduction ................................................................. 1
Foolish Assumptions .......................................................................................2
Icons Used in This Book .................................................................................3
Beyond the Book .............................................................................................4
Where to Go from Here ...................................................................................4
Part I: Getting Started with NoSQL ................................ 5
Chapter 1: Introducing NoSQL: The Big Picture . . . . . . . . . . . . . . . . . . . .7
A Brief History of NoSQL ................................................................................8
Amazon and Google papers ..................................................................8
What NoSQL means today ..................................................................11
Features of NoSQL .........................................................................................11
Common features .................................................................................12
Not‐so‐common features .....................................................................17
Enterprise NoSQL ................................................................................18
Why You Should Care about NoSQL ...........................................................20
Recent trends in IT ..............................................................................20
Problems with conventional approaches .........................................21
NoSQL beneits and precautions .......................................................26
Chapter 2: NoSQL Database Design and Terminology . . . . . . . . . . . . .27
Managing Different Data Types ....................................................................28
Columnar...............................................................................................30
Key‐value stores ...................................................................................32
Triple and graph stores ......................................................................33
Document ..............................................................................................36
Search engines .....................................................................................37
Hybrid NoSQL databases ....................................................................38
Available NoSQL products ..................................................................38
Describing NoSQL ..........................................................................................39
Applying Consistency Methods ...................................................................42
ACID .......................................................................................................42
BASE ......................................................................................................44
Choosing ACID or BASE? .....................................................................45
Availability approaches ......................................................................45
Developing applications on NoSQL ...................................................48
Polyglot persistence ............................................................................48
www.allitebooks.com
vi NoSQL For Dummies
Polyglot persistence explained ..........................................................49
The death of the RDBMS? ...................................................................50
Integrating Related Technologies ................................................................51
Search engine techniques ...................................................................52
Business Intelligence, dashboarding, and reporting .......................53
Batch processing with Hadoop Map/Reduce ...................................54
Hadoop HDFS ........................................................................................55
Semantics ..............................................................................................56
Public cloud ..........................................................................................57
Chapter 3: Evaluating NoSQL . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .59
The Technical Evaluation .............................................................................59
Which type of NoSQL is for you? .......................................................61
Search features.....................................................................................61
Scaling NoSQL ......................................................................................65
Keeping data safe .................................................................................67
Visualizing NoSQL ................................................................................69
Extending your data layer ...................................................................71
The Business Evaluation ...............................................................................72
Developing skills ..................................................................................73
Getting value quickly ...........................................................................73
Finding help ..........................................................................................73
Deciding on open‐source versus commercial software ..................74
Building versus buying ........................................................................75
Evaluating vendor capabilities ...........................................................76
Finding support worldwide ................................................................76
Expanding to the cloud .......................................................................77
Getting Support ..............................................................................................77
Business or mission‐critical features ................................................78
Vendor claims ......................................................................................78
Enterprise system issues ....................................................................79
Security .................................................................................................80
Preparing for failure ............................................................................88
Scaling up ..............................................................................................89
Acceptance testing ..............................................................................92
Monitoring ............................................................................................92
Part II: Key-Value Stores ............................................ 95
Chapter 4: Common Features of Key-Value Stores. . . . . . . . . . . . . . . . .97
Managing Availability ....................................................................................98
Trading consistency ............................................................................98
Implementing ACID support ...............................................................99
www.allitebooks.com
Table of Contents
vii
Managing Keys ...............................................................................................99
Partitioning .........................................................................................100
Accessing data on partitions ............................................................101
Managing Data ..............................................................................................101
Data types in key-value stores .........................................................102
Replicating data .................................................................................103
Versioning data ..................................................................................103
Chapter 5: Key-Value Stores in the Enterprise . . . . . . . . . . . . . . . . . . .105
Scaling ...........................................................................................................105
Simple data model — fast retrieval .................................................107
In‐memory caching ............................................................................107
Reducing Time to Value ..............................................................................107
Using simple structures ....................................................................108
Complex structure handling .............................................................108
Chapter 6: Key-Value Use Cases . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .111
Managing User Information ........................................................................111
Delivering web advertisements ........................................................112
Handling user sessions .....................................................................112
Supporting personalization ..............................................................113
High‐Speed Data Caching ............................................................................114
Chapter 7: Key-Value Store Products . . . . . . . . . . . . . . . . . . . . . . . . . . .117
High‐Speed Key Access ...............................................................................118
Caching data in memory ...................................................................118
Replicating data to slaves .................................................................118
Data modeling in key‐value stores ...................................................119
Operating on data ..............................................................................120
Evaluating Redis .................................................................................120
Taking Advantage of Flash .........................................................................121
Spending money for speed ...............................................................121
Context computing ............................................................................121
Evaluating Aerospike .........................................................................122
Using Pluggable Storage .............................................................................123
Changing storage engines .................................................................123
Caching data in memory ...................................................................124
Evaluating Voldemort ........................................................................124
Separating Data Storage and Distribution ................................................125
Using Berkeley DB for single node storage.....................................125
Distributing data ................................................................................126
Evaluating Oracle NoSQL ..................................................................126
Handling Partitions ......................................................................................128
Tolerating partitions .........................................................................128
Secondary indexing ...........................................................................129
Evaluating Riak ...................................................................................130
www.allitebooks.com
viii NoSQL For Dummies
Chapter 8: Riak and Basho . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .133
Choosing a Key‐Value Store .......................................................................133
Ensuring skill availability ..................................................................134
Integrating with Hadoop Map/Reduce ............................................134
Using JSON ..........................................................................................135
Finding Riak Support (Basho) ....................................................................136
Enabling cloud service ......................................................................136
Handling disasters .............................................................................137
Evaluating Basho................................................................................137
Part III: Bigtable Clones ........................................... 139
Chapter 9: Common Features of Bigtables. . . . . . . . . . . . . . . . . . . . . . .141
Storing Data in Bigtables ............................................................................142
Using row keys ...................................................................................142
Creating column families ..................................................................142
Using timestamps ..............................................................................143
Handling binary values......................................................................143
Working with Data .......................................................................................143
Partitioning your database ...............................................................144
Clustering ............................................................................................145
Denormalizing ....................................................................................146
Managing Data ..............................................................................................148
Locking data .......................................................................................148
Using tablets .......................................................................................148
Coniguring replication .....................................................................149
Improving Performance ..............................................................................150
Compressing data ..............................................................................150
Caching data .......................................................................................150
Filtering data.......................................................................................151
Chapter 10: Bigtable in the Enterprise . . . . . . . . . . . . . . . . . . . . . . . . . .153
Managing Multiple Data Centers ................................................................153
Active-active clustering .....................................................................154
Managing time ....................................................................................154
Reliability ......................................................................................................156
Being Google .......................................................................................156
Ensuring availability ..........................................................................157
Scalability .....................................................................................................158
Ingesting data in parallel ...................................................................159
In-memory caching ............................................................................159
www.allitebooks.com
Table of Contents
ix
Indexing ...............................................................................................160
Aggregating data ................................................................................162
Coniguring dynamic clusters ..........................................................163
Chapter 11: Bigtable Use Cases. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .165
Handling Sparse Data ..................................................................................165
Using an RDBMS to store sparse data .............................................166
Using a Bigtable ..................................................................................167
Analyzing Log Files ......................................................................................168
Analyzing data in-light ......................................................................168
Building data summaries ..................................................................169
Chapter 12: Bigtable Products . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .171
Managing Tabular Big Data ........................................................................172
Designing a row key ...........................................................................172
Distributing data with HDFS .............................................................176
Batch processing Bigtable data .......................................................177
Assessing HBase ................................................................................179
Securing Your Data ......................................................................................179
Cell-level security ...............................................................................180
Assessing Accumulo ..........................................................................183
High-Performing Bigtables ..........................................................................184
Using a native Bigtable ......................................................................184
Indexing data ......................................................................................184
Ensuring data consistency ................................................................185
Assessing Hypertable ........................................................................186
Distributing Data Globally ..........................................................................187
Substituting a key-value store ..........................................................188
Inserting data fast ..............................................................................189
Replicating data globally...................................................................190
Assessing Cassandra .........................................................................190
Chapter 13: Cassandra and DataStax . . . . . . . . . . . . . . . . . . . . . . . . . . .193
Designing a Modern Bigtable .....................................................................193
Clustering ............................................................................................194
Tuning consistency............................................................................194
Analyzing data ....................................................................................195
Searching data ....................................................................................195
Securing Cassandra ...........................................................................196
Finding Support for Cassandra ..................................................................197
Managing and monitoring Cassandra ..............................................197
Active‐active clustering .....................................................................197
x NoSQL For Dummies
Part IV: Document Databases .................................... 199
Chapter 14: Common Features of Document Databases . . . . . . . . . . .201
Using a Tree‐Based Data Model .................................................................202
Handling article documents .............................................................204
Managing trades in inancial services .............................................204
Discovering document structure .....................................................205
Supporting unstructured documents ..............................................206
Document Databases as Key‐Value Stores ...............................................208
Modeling values as documents ........................................................208
Using value information ....................................................................208
Patching Documents ...................................................................................209
Supporting partial updates ...............................................................209
Streaming changes .............................................................................210
Providing alternate structures in real time ....................................211
Chapter 15: Document Databases in the Enterprise . . . . . . . . . . . . . .213
Sharding ........................................................................................................214
Key-based sharding ...........................................................................214
Automatic sharding ...........................................................................214
Preventing Loss of Data ..............................................................................215
Replicating data locally .....................................................................216
Using multiple datacenters ...............................................................217
Selectively replicating data ..............................................................217
Managing Consistency ................................................................................218
Using eventual consistency ..............................................................219
Using ACID consistency ....................................................................219
Chapter 16: Document Database Use Cases . . . . . . . . . . . . . . . . . . . . .221
Publishing Content ......................................................................................221
Managing content lifecycle ...............................................................222
Distributing content to sales channels ...........................................223
Managing Unstructured Data Feeds ..........................................................225
Entity extraction and enrichment ....................................................225
Managing Changing Data Structures .........................................................226
Handling variety .................................................................................227
Managing change over time ..............................................................228
Consolidating Data ......................................................................................229
Handling incoming streams ..............................................................229
Amalgamating related data ...............................................................230
Providing answers as documents ....................................................231
Table of Contents
xi
Chapter 17: Document Database Products . . . . . . . . . . . . . . . . . . . . . .233
Providing a Memcache Replacement ........................................................233
Ensuring high-speed reads ...............................................................234
Using in-memory document caching ...............................................234
Supporting mobile synchronization ................................................235
Evaluating Couchbase .......................................................................235
Providing a Familiar Developer Experience .............................................236
Indexing all your data ........................................................................236
Using SQL ............................................................................................237
Linking to your programming language ..........................................238
Evaluating Microsoft DocumentDB .................................................239
Providing an End-to-End Document Platform ..........................................240
Ensuring consistent fast reads and writes .....................................241
Supporting XML and JSON ................................................................242
Using advanced content search .......................................................243
Securing documents ..........................................................................244
Evaluating MarkLogic Server ............................................................246
Providing a Web Application Back End ....................................................247
Trading consistency for speed .........................................................248
Sticking with JavaScript and JSON ..................................................249
Finding a web community .................................................................249
Evaluating MongoDB .........................................................................249
Chapter 18: MongoDB . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .251
Using an Open-Source Document Database .............................................251
Handling JSON documents ...............................................................252
Finding a language binding ...............................................................252
Effective indexing ...............................................................................253
Finding Support for MongoDB ...................................................................254
MongoDB in the cloud .......................................................................254
Licensing advanced features ............................................................255
Ensuring a sustainable partner ........................................................256
Part V: Graph and Triple Stores ................................. 257
Chapter 19: Common Features of Triple and Graph Stores. . . . . . . . .259
Deciding on Graph or Triple Stores ..........................................................260
Triple queries .....................................................................................260
Graph queries .....................................................................................262
Describing relationships ...................................................................263
Making a decision ..............................................................................263
xii NoSQL For Dummies
Deciding on Triples or Quads ....................................................................264
Storing RDF .........................................................................................265
Querying with SPARQL ......................................................................267
Using SPARQL 1.1 ...............................................................................268
Modifying a named graph .................................................................268
Managing Triple Store Structures .............................................................269
Describing your ontology .................................................................269
Enhancing your vocabulary with SKOS...........................................271
Describing data provenance.............................................................272
Chapter 20: Triple Stores in the Enterprise . . . . . . . . . . . . . . . . . . . . . .275
Ensuring Data Integrity ...............................................................................275
Enabling ACID compliance ................................................................276
Sharding and replication for high availability ................................277
Replication for disaster recovery ....................................................278
Storing Documents with Triples ................................................................278
Describing documents ......................................................................279
Combining queries .............................................................................280
Chapter 21: Triple Store Use Cases. . . . . . . . . . . . . . . . . . . . . . . . . . . . .283
Extracting Semantic Facts ..........................................................................284
Extracting context with subjects .....................................................284
Forward inferencing ..........................................................................285
Tracking Provenance ..................................................................................286
Building a Web of Facts ..............................................................................287
Taking advantage of open data ........................................................287
Incorporating data from GeoNames ................................................288
Incorporating data from DBpedia ....................................................289
Linked open‐data publishing ............................................................289
Migrating RDBMS data ......................................................................290
Managing the Social Graph .........................................................................290
Storing social information ................................................................291
Performing social graph queries ......................................................291
Chapter 22: Triple Store Products . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .293
Managing Documents and Triples .............................................................294
Storing documents and relationships .............................................294
Combining documents in real time .................................................296
Combined search ...............................................................................297
Evaluating ArangoDB .........................................................................298
Evaluating OrientDB ..........................................................................298
Evaluating MarkLogic Server ............................................................299
Scripting Graphs ..........................................................................................300
Automatic indexing ............................................................................301
Using the SPIN API .............................................................................301
JavaScript scripting ...........................................................................302
Table of Contents
xiii
Triple-level security ...........................................................................302
Integrating with Solr and MongoDB ................................................303
Evaluating AllegroGraph ...................................................................304
Using a Distributed Graph Store ................................................................304
Adding metadata to relationships ...................................................305
Optimizing for query speed ..............................................................305
Using custom graph languages ........................................................305
Evaluating Neo4j ................................................................................306
Chapter 23: Neo4j and Neo Technologies . . . . . . . . . . . . . . . . . . . . . . .309
Exploiting Neo4j ...........................................................................................309
Advanced path‐inding algorithms ..................................................310
Scaling up versus scaling out ...........................................................310
Complying with open standards ......................................................311
Finding Support for Neo4j ..........................................................................312
Clustering ............................................................................................313
High‐performance caching................................................................313
Cache‐based sharding .......................................................................314
Finding local support ........................................................................314
Finding skills .......................................................................................314
Part VI: Search Engines ............................................ 315
Chapter 24: Common Features of Search Engines . . . . . . . . . . . . . . . .317
Dissecting a Search Engine .........................................................................318
Search versus query ..........................................................................318
Web crawlers ......................................................................................318
Indexing ...............................................................................................319
Searching ............................................................................................321
Indexing Data Stores ...................................................................................323
Using common connectors ...............................................................323
Periodic indexing ...............................................................................324
Alerting .........................................................................................................324
Using reverse queries ........................................................................325
Matchmaking queries ........................................................................325
Chapter 25: Search Engines in the Enterprise. . . . . . . . . . . . . . . . . . . .327
Searching the Enterprise ............................................................................327
Connecting to systems ......................................................................328
Ensuring data security ......................................................................328
Creating a Search Application ...................................................................329
Coniguring user interfaces ..............................................................329
What a good search API gives you ..................................................330
Going beyond basic search with analytics .....................................331
xiv NoSQL For Dummies
Chapter 26: Search Engine Use Cases . . . . . . . . . . . . . . . . . . . . . . . . . .335
Searching E-Commerce Products ..............................................................335
Amazon-type cataloguing..................................................................335
Geospatial distance scoring .............................................................336
Enterprise Data Searching ..........................................................................338
Storing web data ................................................................................338
Searching corporate data .................................................................338
Searching application data ...............................................................339
Alerting .........................................................................................................339
Enabling proactive working ..............................................................339
Finding bad guys ................................................................................340
Chapter 27: Types of Search Engines . . . . . . . . . . . . . . . . . . . . . . . . . . .341
Using Common Open-Source
Text Indexing ............................................................................................341
Using Lucene ......................................................................................342
Distributing Lucene ...........................................................................342
Evaluating Lucene/SolrCloud ...........................................................343
Combining Document Stores and Search Engines ..................................344
Universal indexing .............................................................................345
Using range indexes ...........................................................................345
Operating on in-memory data ..........................................................346
Retrieving ine-grained results .........................................................346
Evaluating MarkLogic ........................................................................347
Evaluating Enterprise Search .....................................................................348
Using SharePoint search ...................................................................348
Integrating NoSQL and HP Autonomy .............................................348
Using IBM OmniFind ..........................................................................349
Evaluating Google search appliance ...............................................349
Storing and Searching JSON .......................................................................349
JSON universal indexing ...................................................................350
Scriptable querying ...........................................................................350
Evaluating Elasticsearch ...................................................................352
Chapter 28: Elasticsearch . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .353
Using the Elasticsearch Product ...............................................................353
ELK stack.............................................................................................354
Using Elasticsearch............................................................................354
Using Logstash ...................................................................................355
Using Kibana .......................................................................................355
Finding Support for Elasticsearch .............................................................357
Evaluating Elasticsearch BV .............................................................357
Table of Contents
xv
Part VII: Hybrid NoSQL Databases ............................ 359
Chapter 29: Common Hybrid NoSQL Features . . . . . . . . . . . . . . . . . . . .361
The Death of Polyglot Persistence ............................................................362
One product, many features .............................................................362
Best-of-breed solution versus single product ................................363
Advantages of a Hybrid Approach ............................................................363
Single product means lower cost.....................................................364
How search technology gives a better column store ....................365
How semantic technology assists content discovery ...................366
Chapter 30: Hybrid Databases in the Enterprise. . . . . . . . . . . . . . . . . .369
Selecting a Database by Functionality ......................................................369
Ensuring functional depth and breadth ..........................................370
Following a single product’s roadmap ............................................370
Building Mission-Critical Applications ......................................................371
Ensuring data safety ..........................................................................371
Ensuring data is accessible ..............................................................372
Operating in high-security environments .......................................373
Chapter 31: Hybrid NoSQL Database Use Cases . . . . . . . . . . . . . . . . .375
Digital Semantic Publishing ........................................................................375
Journalists and web publishing .......................................................376
Changing legislation over time .........................................................377
Metadata Catalogs .......................................................................................377
Creating a single view ........................................................................378
Replacing legacy systems .................................................................378
Exploring data ....................................................................................379
Chapter 32: Hybrid NoSQL Database Products . . . . . . . . . . . . . . . . . . .381
Managing Triples and Aggregates .............................................................381
Generating triples from documents ................................................382
Enforcing schema on read ................................................................383
Evaluating OrientDB ..........................................................................383
Combining Documents and Triples with Enterprise Capabilities .........383
Combined database, search, and application services ................384
Schema free versus schema agnostic .............................................385
Providing Bigtable features ..............................................................385
Securing access to information ........................................................386
Evaluating MarkLogic ........................................................................387
xvi NoSQL For Dummies
Chapter 33: MarkLogic . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .389
Understanding MarkLogic Server ..............................................................389
Universal Indexing .......................................................................................390
Range indexing and aggregate queries ...........................................391
Combining content and semantic technologies.............................392
Adding Hadoop support....................................................................393
Replication on intermittent networks .............................................394
Ensuring data integrity ......................................................................394
Compartmentalizing information .....................................................395
MarkLogic Corporation ...............................................................................396
Finding trained developers ...............................................................396
Finding 24/7 support .........................................................................397
Using MarkLogic in the cloud ...........................................................397
Part VIII: The Part of Tens ......................................... 399
Chapter 34: Ten Advantages of NoSQL over RDBMS. . . . . . . . . . . . . .401
Chapter 35: Ten NoSQL Misconceptions . . . . . . . . . . . . . . . . . . . . . . . .407
Chapter 36: Ten Reasons Developers Love NoSQL . . . . . . . . . . . . . . .413
Index ....................................................................... 419