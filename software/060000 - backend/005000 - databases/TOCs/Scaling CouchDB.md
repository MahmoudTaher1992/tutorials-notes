Table of Contents
Preface . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . vii
1. 2. 3. 4. 5. Defining Scaling Goals . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1
What is Scalability? 1
Capacity Planning 2
The CAP Theorem 2
Consistency 2
Availability 2
Partition Tolerance 3
Tuning and Designing for Scale . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 5
Performance Tips 5
Document Design 8
Replication . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . Filters and Specifying Documents 14
Conflict Resolution 17
Picking the Same Revision as CouchDB 11
20
Picking a Conflicted Revision 22
Merging Revisions 23
Load Balancing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 25
CouchDB Nodes 26
Replication Setup 28
Proxy Server Configuration 29
Testing 32
Clustering . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 35
BigCouch 35
Lounge 36
Pillow 37
v
6. Distributed Load Testing . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 39
Installing Tsung 40
Configuring Tsung 42
Running Tsung 49
Monitoring 54
Identifying Bottlenecks 57
Test Configuration 58